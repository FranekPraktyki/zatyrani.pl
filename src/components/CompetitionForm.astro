---
---

<form id="competitionForm" class="max-w-2xl mx-auto p-4">
  <div class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700">Nazwa zawodów</label>
      <input type="text" name="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500">
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700">Data</label>
      <input type="date" name="date" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">Strona WWW</label>
      <input type="url" name="website" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500">
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">Link do rejestracji</label>
      <input type="url" name="registration" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500">
    </div>

    <button type="submit" class="w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700">
      Dodaj zawody
    </button>
  </div>
</form>

<script>
  const form = document.getElementById('competitionForm');
  
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    
    try {
      const response = await fetch('/api/add-competition', {
        method: 'POST',
        body: JSON.stringify(Object.fromEntries(formData)),
        headers: {
          'Content-Type': 'application/json'
        }
      });
      
      if (response.ok) {
        alert('Zawody dodane pomyślnie!');
        form.reset();
      } else {
        throw new Error('Błąd podczas dodawania zawodów');
      }
    } catch (error) {
      alert('Wystąpił błąd: ' + error.message);
    }
  });
</script>